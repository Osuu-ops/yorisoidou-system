<!--
参照定義ファイル：
MEP/definitions/SYMBOLS.md

運用ルール：
本ファイル内に出現するすべての参照記号（@Sxxxx）は、
個別指定や列挙を行わず、
上記「参照定義ファイル」を唯一の正として解決する。

本ファイルは、参照関係の宣言・管理を行わない。
-->



# system_protocol

MEP プロジェクト  
システム統治・フェーズ制御プロトコル  
（機械定義・唯一の正）

---

## 0. 本書の位置づけ

本書（system_protocol）は、  
MEP プロジェクトにおける **SYSTEM の状態遷移・制御・監査**を  
機械的に定義する唯一のプロトコルである。

本書は、

- MEP_PROTOCOL に完全従属する
- 業務仕様（master_spec）を定義しない
- 人間判断を代替しない

本書に定義されていない挙動は、  
**存在しないものとして扱う。**

---

## 1. state-machine 原則

SYSTEM は、  
**state-machine による自動遷移**を前提として動作する。

明示的に定義されていない遷移・分岐・巻き戻しは  
一切許可されない。

---

## 2. 状態モデル

SYSTEM は、以下の状態を持つ。

- 初期状態：**B**
- 終了状態：**S 完了後、必ず B に復帰**

状態は循環構造を持ち、  
線形完了を前提としない。

---

## 3. フェーズ一覧と責務（固定）

SYSTEM は、以下のフェーズのみを扱う。

- **B**：編集・分類・再構成・diff 承認起点  
- **A**：差分統合  
- **X**：旧仕様保持  
- **T**：文章・構造監査  
- **D**：Runtime 監査  
- **C**：生成  
- **N**：内部保持  
- **R**：差戻し  
- **S**：保存・確定  

上記以外のフェーズは存在しない。

---

## 4. silent-execution 原則

SYSTEM は、  
**B フェーズ以外では完全沈黙（silent-execution）**とする。

T・D の監査結果は、  
**直接外部出力してはならない。**

可視化は、  
**必ず B フェーズを経由**して行う。

---

## 5. 変更手段の唯一性

SYSTEM における変更手段は、  
**diff 方式のみ**とする。

以下を禁止する。

- 全文再構成
- 部分編集
- 直接書換え

---

## 6. diff 運用と適用順序

diff は、以下の順序でのみ適用される。

**B → A → X → T → D → S**

この順序は固定であり、  
変更・省略・逆転を認めない。

---

## 7. diff 承認語トリガー

フェーズ遷移は、  
**diff 承認語トリガー**によってのみ成立する。

承認語集合・閾値・判定条件は、  
SYSTEM 外部に委譲される。

---

## 8. 外部委譲パラメータ

以下は、SYSTEM 内に定義しない。

- 承認語集合
- 閾値
- 分割単位
- 容量上限

これらは  
**外部委譲パラメータ**として扱う。

---

## 9. Runtime 監査

SYSTEM は、  
Runtime 監査を正式責務として持つ。

Runtime 監査は、

- expected effect
- unexpected effect

の検知を行う。

---

## 10. Runtime 破綻

以下を **Runtime 破綻**と定義する。

- 定義外フェーズ実行
- フェーズ順序違反
- ユーザーによるフェーズ順序操作
- silent-execution 違反

Runtime 破綻発生時、  
SYSTEM は **即 NG・差戻し**を行う。

---

## 11. 自律ループ制御

SYSTEM は、  
以下の自律ループを持つ。

**C → N → D → R → C**

本ループは、  
明示条件を満たした場合のみ継続可能とする。

遮断条件は、  
Runtime 破綻検知とする。

---

## 12. 保存と成果物

**S フェーズに保存されたもののみ**を  
正式成果物とする。

実装反映は、  
**全文貼替**によってのみ許可される。

---

## 13. forced-block-split

forced-block-split は、  
**B フェーズ専権**とする。

部分出力は禁止する。

---

## 14. 生成物完全性

SYSTEM は、  
生成物完全性チェック  
（Completeness Guard）を前段安全弁として実行する。

完全性未達の場合、  
次フェーズへ進行してはならない。

---

## 15. 最終宣言

本書をもって、

MEP プロジェクトにおける  
SYSTEM の state-machine・制御・監査・限界は  
**確定**とする。

これ以降の変更は、  
MEP_PROTOCOL に基づく **別フェーズ**とする。

---
