UI_spec.md
MEP Form UI ― UI意味仕様（初版）
1. 本書の位置づけ

本書（UI_spec）は、
MEP Form UI において ユーザーが画面を見たときに
「何が起きているのか」「次に何をすればよいのか」を理解するための
UIの意味仕様を定義するものである。

本書は 操作手順書ではない

本書は 業務仕様（master_spec）ではない

本書は システム統治仕様（system_protocol）ではない

本書は以下を唯一の目的とする。

UI がユーザーに伝えるべき意味を固定し、
説明コストと誤解を最小化すること

2. UIの基本思想
2.1 操作ではなく「状態」を示すUI

本UIは、
「どのボタンを押すか」を教えるUIではなく、
「今どの状態にいるか」を示すUIである。

ユーザーは以下を理解できればよい。

今はどの状態か

この状態では何ができるか

何が起きれば次に進むのか

UIは、これ以上の判断をユーザーに要求しない。

2.2 内部フェーズとUI表示の分離

内部で使用される以下の概念：

M / P / E

A / B / T / C / D / R / S

progress / audit / runtime

これらは UI表示の正ではない。

UIでは、人が理解しやすい
**「UI状態名」**を正とする。

3. UI状態一覧（人向け定義）

本UIにおいて、ユーザーが認識すべき状態は以下のみとする。

状態一覧

未開始

編集中

処理中

業務エラー（監査NG）

システムエラー

完了

※ 状態は同時に複数成立しない。

4. 各UI状態の定義
4.1 未開始
意味

まだ作業は始まっていない

内容の編集も処理も行われていない

UI表示例

状態：未開始

表示される操作

編集する（B）

4.2 編集中（B）
意味

内容（カルテ／マスタ）を考え、入力している途中

処理は実行されていない

UI表示例

状態：編集中

表示される操作

一時保存（カルテ／マスタ）

補足

編集中は進捗表示（クルクル）は行わない

編集内容は保存されるまで確定しない

4.3 処理中
意味

システムが保存・監査・生成などの処理を実行している

ユーザーは結果を待つだけの状態

UI表示例

状態：処理中

UI挙動

進捗表示（％／スピナー）を表示する

表示される操作

中断

4.4 業務エラー（監査NG）
意味

入力内容に不備があり、業務的に処理できない状態

内容を修正すれば再度進めることができる

UI表示例

状態：内容に不備があります

表示される操作

修正（R）

重要事項

業務エラーは 業務内容の問題である

システム自体は正常に動作している

4.5 システムエラー
意味

保存失敗、通信失敗、例外などにより
処理そのものが失敗した状態

業務内容の正否とは無関係

UI表示例

状態：システムエラー

表示される操作

キャンセル

重要事項

修正（R）は表示しない

再試行は行わない（現段階）

4.6 完了
意味

処理が正常に完了した状態

UI表示例

状態：完了

表示される操作

次の作業（編集／新規作成など）

5. エラー種別と対応の整理
5.1 エラー分類
種類	内部条件	UI状態	対応
業務エラー	audit.result === "NG"	業務エラー	修正（R）
システムエラー	progress.tag === "error"	システムエラー	キャンセル
5.2 R（修正）の意味

R（修正）は以下の場合にのみ表示される。

業務エラー（監査NG）の場合

R は以下を意味しない。

システムエラーの復旧

処理再試行

状態リセット

6. 新規作成の意味
定義

「新規作成」とは、
新しい業務（1件）の作業を開始することを意味する。

新規作成時の挙動

状態は「未開始」に初期化される

カルテ／マスタは自動的に確定しない

UIは HOME 状態に戻る

UI表示例

新しい作業を開始しました。
内容の入力を始めてください。

7. カルテ／マスタの位置づけ

カルテ、マスタは 作業対象であり、状態ではない

開いている＝状態が変わった、ではない

状態は常に UI状態定義に従う

8. UI説明文の原則

UI上で表示する説明文は、以下を満たす。

1〜2行で完結する

「今の状態」と「次にできること」だけを書く

操作手順は書かない

9. 本書の更新ルール

UI挙動を変更する場合は、本書を先に修正する

index.html の変更は、本書との差分として行う

master_spec / system_protocol には影響させない

10. まとめ（設計原則）

UIは状態を語る

ユーザーに判断させない

R は業務修正専用

システムエラーはキャンセルでリセット

説明できない挙動は、設計ミスとみなす

以上。
