INTERFACE_PROTOCOL

UI_PROTOCOL × system_protocol
責務境界・優先順位定義（唯一の正）

0. 本書の目的と位置づけ

本書（INTERFACE_PROTOCOL）は、
UI_PROTOCOL と system_protocol の責務境界を明確に定義する唯一の正である。

本書の目的は以下に限定される。

UI と SYSTEM の判断領域を完全に分離すること

責務の混入・逆流・重複を防止すること

挙動説明不能・責任不明確な状態を事前に排除すること

本書は、

UI の具体仕様を定義しない

SYSTEM の内部実装を定義しない

業務意味を定義しない

それぞれの定義は、以下の文書にのみ存在する。

UI意味・状態：UI_PROTOCOL

システム統治・生成制御：system_protocol

業務意味・判断：master_spec

1. 基本原則（最重要）
原則1

UI は「状態と意味」を語るのみであり、
処理・判断・制御を行ってはならない。

原則2

SYSTEM は「処理と制御」を行うのみであり、
UI の表現・説明・見せ方を決めてはならない。

原則3

UI と SYSTEM は互いの内部概念を参照してはならない。

2. UI_PROTOCOL の責務（UI が決めてよいこと）

UI_PROTOCOL が決定権を持つのは、以下に限定される。

2.1 UI 状態の定義

人が認識する UI 状態名
（未開始 / 編集中 / 処理中 / 業務エラー / システムエラー / 完了）

UI 状態が同時に複数成立しないという制約

各 UI 状態の意味定義

2.2 UI 表示ルール

各 UI 状態で表示される文言の意味

各 UI 状態で表示可能な操作の種類

UI 説明文の原則（簡潔・状態中心・手順非記載）

2.3 UI 遷移の「意味的」制約

どの UI 状態から、どの UI 状態へ遷移しうるか

禁止される UI 状態遷移の定義

※
UI は 「遷移の意味」を定義するのみであり、
遷移の実行判断は行わない。

3. system_protocol の責務（SYSTEM が決めてよいこと）

system_protocol が決定権を持つのは、以下に限定される。

3.1 内部フェーズ管理

A / B / T / C / D / R / S 等の内部フェーズ制御

フェーズ間の遷移条件

自動遷移・沈黙実行の制御

3.2 処理・監査・生成

保存処理

監査処理

生成処理

例外処理・失敗検知

3.3 内部状態管理

progress / audit / runtime 等の内部状態

内部エラー・例外の分類

再試行・中断・ロールバック制御

※
SYSTEM は UI 状態名を内部正として使用してはならない。

4. 明確な禁止事項（境界侵害）
4.1 UI 側の禁止事項

UI は、以下を行ってはならない。

内部フェーズ（A/B/T/C 等）を表示・説明すること

audit / runtime / progress を UI 文言の根拠とすること

処理の成否を UI 独自判断で決定すること

SYSTEM の処理内容を推測・代弁すること

4.2 SYSTEM 側の禁止事項

SYSTEM は、以下を行ってはならない。

UI 文言を直接指定・変更すること

UI に表示する操作内容を決定すること

UI 状態名を内部制御の条件として使用すること

UI の見せ方・説明内容に介入すること

5. UI 状態と SYSTEM 状態の対応関係

UI 状態と SYSTEM 内部状態は、
1 対 1 対応ではない。

SYSTEM は内部状態を持ち、
UI はその結果を UI_PROTOCOL に従って解釈・表示する。

SYSTEM 内部条件	UI 状態
編集フェーズ	編集中
処理実行中	処理中
audit.result === "NG"	業務エラー
progress.tag === "error"	システムエラー
正常完了	完了

※
この対応表は 意味対応であり、
制御条件ではない。

6. 衝突時の優先順位

UI_PROTOCOL と system_protocol の解釈が衝突した場合、
以下の優先順位を適用する。

master_spec（業務意味）

UI_PROTOCOL（UI の意味・状態）

system_protocol（処理・制御）

SYSTEM は、
UI_PROTOCOL に反する UI 状態・意味を生成してはならない。

UI は、
system_protocol の内部事情を理由に意味を変更してはならない。

7. 本書の更新ルール

UI と SYSTEM の責務境界を変更する場合のみ、本書を修正する

UI 表示変更のみの場合、本書は変更しない

SYSTEM 内部実装変更のみの場合、本書は変更しない

本書の修正は、UI_PROTOCOL / system_protocol の修正に優先する

8. 最終原則

UI は「意味」を語る

SYSTEM は「処理」を語る

両者は互いの言語を話さない

境界が説明できない場合、それは設計ミスである

以上。
