<!--
参照定義ファイル：
MEP/definitions/SYMBOLS.md

運用ルール：
本ファイル内に出現するすべての参照記号（@Sxxxx）は、
個別指定や列挙を行わず、
上記「参照定義ファイル」を唯一の正として解決する。

本ファイルは、参照関係の宣言・管理を行わない。
-->



# UI_PROTOCOL

MEP プロジェクト  
UI 統治・状態意味プロトコル  
（人間可視化層・唯一の正）

---

## 0. 本書の位置づけ

本書（UI_PROTOCOL）は、  
MEP プロジェクトにおける **UI の責務・状態表現・意味制約**を定義する  
唯一のプロトコルである。

本書は、

- MEP_PROTOCOL に完全従属する
- system_protocol の内部制御を表出しない
- 業務仕様（master_spec）を定義しない

UI に関する判断・表現は、  
本書に定義された範囲でのみ許可される。

---

## 1. UI の最重要思想

UI は、  
**操作を誘導するものではなく、状態を理解させるためのもの**である。

UI の第一目的は、  
「今、何が起きているか」を人間が誤解なく把握できることとする。

---

## 2. 内部フェーズとの分離

UI 状態と、  
SYSTEM の内部フェーズ（A/B/T/C/D/R/S 等）は  
**完全に分離**される。

内部フェーズ名・識別子・遷移は、  
UI に表示してはならない。

---

## 3. UI 状態表現の原則

UI 状態は、

- 人間向け日本語名のみを正とする
- 内部識別子を持ち込まない
- 有限個に固定する

UI 状態は、  
**同時に複数成立してはならない。**

---

## 4. UI 状態一覧（固定）

UI は、以下の状態のみを持つ。

- 未開始  
- 編集中  
- 処理中  
- 業務エラー  
- システムエラー  
- 完了  

上記以外の UI 状態は存在しない。

---

## 5. 各 UI 状態の意味定義

- **未開始**：作業は開始されていない  
- **編集中**：人間が入力・修正を行っている  
- **処理中**：SYSTEM が処理を実行している  
- **業務エラー**：監査 NG 等、業務判断により修正が必要  
- **システムエラー**：SYSTEM 破綻・処理不能状態  
- **完了**：UI 上の処理区切りを示す便宜的状態  

「完了」は、  
恒久的な最終状態を意味しない。

---

## 6. エラー状態の分離原則

- **業務エラー**：修正（R）対象  
- **システムエラー**：再試行・復旧・リセット対象  

R（修正）は、  
**業務エラー専用**であり、  
復旧操作を意味しない。

---

## 7. 進捗表示の制約

進捗表示（スピナー等）は、  
**処理中状態でのみ**許可される。

編集中状態では、  
進捗表示を行ってはならない。

---

## 8. 作業対象と UI 状態の分離

カルテ／マスタは、  
UI 状態ではなく **作業対象**に過ぎない。

作業対象の名称を、  
UI 状態として扱ってはならない。

---

## 9. UI 表示文言の制約

UI の説明文は、  
以下のみを短文で記述する。

- 今の状態
- 次にできること

理由説明・背景説明・解説は禁止する。

---

## 10. 設計統治原則

UI 挙動を変更する場合、  
**必ず UI_PROTOCOL を先に修正する。**

UI_PROTOCOL を修正せずに行われた  
UI 挙動変更は無効とする。

---

## 11. 設計責任の最終原則

**説明できない UI 挙動は、設計ミスとみなす。**

理由を説明できない状態・遷移・表示は、  
存在してはならない。

---

## 12. 最終宣言

本書をもって、

MEP プロジェクトにおける  
UI の状態定義・意味境界・設計責任は  
**確定**とする。

これ以降の UI 変更は、  
本書を前提とした **別フェーズ**とする。

---
